!function(){"use strict";!function(t){var r=t.screen,e=r.width,n=r.height,a=t.navigator.language,o=t.location,i=t.localStorage,c=t.document,u=t.history,l=o.hostname,s=o.pathname,p=o.search,f=c.currentScript;if(f){var h=function(t,r,e){var n=t[r];return function(){for(var r=[],a=arguments.length;a--;)r[a]=arguments[a];return e.apply(null,r),n.apply(t,r)}},d=function(){return i&&i.getItem("haloTracker.disabled")||b&&function(){var r=t.doNotTrack,e=t.navigator,n=t.external,a="msTrackingProtectionEnabled",o=r||e.doNotTrack||e.msDoNotTrack||n&&a in n&&n[a]();return"1"==o||"yes"===o}()||j&&!w.includes(l)},g="data-",v=f.getAttribute.bind(f),m=v(g+"group")||"",k=v(g+"plural"),y=v(g+"name"),S=v(g+"host-url"),T="false"!==v(g+"auto-track"),b=v(g+"do-not-track"),j=v(g+"domains")||"",w=j.split(",").map((function(t){return t.trim()})),E=(S?S.replace(/\/$/,""):f.src.split("/").slice(0,-1).join("/"))+"/apis/api.halo.run/v1alpha1/countertrackers",N=e+"x"+n,O=""+s+p,x=c.referrer,P=function(t,r){return void 0===t&&(t=O),void 0===r&&(r=x),function(t){if(!d())return fetch(E,{method:"POST",body:JSON.stringify(Object.assign({},t)),headers:{"Content-Type":"application/json"}}).then((function(t){return t.text()})).then((function(t){return cache=t}))}((e={group:m,plural:k,name:y,hostname:l,screen:N,language:a,url:O},n={url:t,referrer:r},Object.keys(n).forEach((function(t){void 0!==n[t]&&(e[t]=n[t])})),e));var e,n},A=function(t,r,e){if(e){x=O;var n=e.toString();(O="http"===n.substring(0,4)?"/"+n.split("/").splice(3).join("/"):n)!==x&&P()}};if(!t.haloTracker){var C=function(t){return trackEvent(t)};C.trackView=P,t.haloTracker=C}if(T&&!d()){u.pushState=h(u,"pushState",A),u.replaceState=h(u,"replaceState",A);var D=function(){"complete"===c.readyState&&P()};c.addEventListener("readystatechange",D,!0),D()}}}(window)}();
